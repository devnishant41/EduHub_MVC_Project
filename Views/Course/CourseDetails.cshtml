@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@model IEnumerable<Test_EduHub.Models.Domain.CourseDetailsViewModel>
@{
    ViewData["Title"] = "Course Details";
}

<div class="container ">
    <h1 class="">Course Details</h1>
    @foreach (var course in Model)
    {
        <div class="mb-5 p-4 border rounded shadow-sm">
            <h2 class="mb-3">@course.Title</h2>
            <div class="row">
                <div class="col-md-8">
                    <p class="text-muted">@course.Description</p>
                    <p><strong>Level:</strong> @course.Level</p>
                    <p><strong>Category:</strong> @course.CategoryName </p>
                    <p><strong>Dates:</strong> @course.CourseStartDate.ToString("MMM dd, yyyy") -
                        @course.CourseEndDate.ToString("MMM dd, yyyy")</p>
                    <p><strong>Price:</strong> â‚¹@course.Price.ToString("F2")</p>
                    <p><strong>Instructor:</strong> @course.FirstName @course.LastName</p>
                </div>
                <div class="col-md-4">
                    <img src="~/images/courses/course.webp" alt="@course.Title" class="img-fluid rounded mb-3"
                        style="width: 100%; height: auto;">

                    @if (@course.UserId == Convert.ToInt32(HttpContextAccessor.HttpContext.Session.GetString("UserId")) &&
                   HttpContextAccessor.HttpContext.Session.GetString("Role") == "Educator")
                    {

                        <div class="d-flex justify-content-end">
                            <a asp-action="EditCourse" asp-controller="Course" asp-route-id="@course.Id"
                                class="btn btn-warning me-2">Edit</a>
                            <a  class="btn btn-danger" asp-action="DeleteCourse"  asp-controller="Course" asp-route-id="@course.Id"
                               >Delete</a>
                        </div>
                    }
                </div>
            </div>
        </div>
      
    }
</div>


@* 
@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var deleteModal = document.getElementById('deleteConfirmationModal');
            deleteModal.addEventListener('show.bs.modal', function (event) {
                var button = event.relatedTarget;
                var courseId = button.getAttribute('data-course-id');
                var confirmDeleteButton = deleteModal.querySelector('#confirmDeleteButton');
                console.log(courseId);
                confirmDeleteButton.setAttribute('href', '/Course/DeleteCourseAsync/' + courseId);
                console.log(confirmDeleteButton)
            });
        });
    </script>
} *@